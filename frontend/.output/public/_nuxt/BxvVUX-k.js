import{r as a,j as _,c as n,a as e,k as w,l as A,m as f,v as k,n as t,p as y,F as N,q as P,s as z,d as u,t as x,o as i}from"./B_s5xVnO.js";const V={class:"px-4 sm:px-6 lg:px-8"},M={class:"max-w-4xl mx-auto"},j={class:"bg-white rounded-lg shadow p-6"},O=["disabled"],D=["value"],q=["disabled"],B={key:0,class:"flex items-center justify-center"},J={key:1},U={key:0,class:"mt-6 p-4 bg-red-50 border border-red-200 rounded-md"},E={class:"flex"},F={class:"ml-3"},G={class:"mt-2 text-sm text-red-700"},W={key:1,class:"mt-6"},I={class:"bg-gray-50 rounded-md p-4"},H={class:"text-sm text-gray-800 overflow-x-auto"},R={__name:"index",setup(K){const r=a(""),d=a(""),p=a(""),g=a("{}"),c=a(null),l=a(""),v=a(!1),C={aws:["aws_caller_identity","aws_iam_policy_document","aws_region","aws_ami","aws_vpc","aws_subnet","aws_security_group"],google:["google_project","google_storage_bucket","google_service_account","google_client_openid_userinfo","google_compute_zones","google_compute_regions"],azurerm:["azurerm_client_config","azurerm_subscription","azurerm_resource_group","azurerm_virtual_network"]},S=_(()=>r.value?C[r.value]||[]:[]),b=_(()=>r.value&&d.value&&p.value.trim()),h=()=>{d.value="",c.value=null,l.value=""},T=async()=>{if(b.value){v.value=!0,l.value="",c.value=null;try{const m=JSON.parse(g.value),o=await $fetch("/api/v1/data-sources/query",{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":"my_mcp_eagle_tiger"},body:{provider:r.value,data_type:d.value,data_name:p.value,config:m}});o.success?c.value=o.output:l.value=o.error||"알 수 없는 오류가 발생했습니다."}catch(m){m.name==="SyntaxError"?l.value="JSON 형식이 올바르지 않습니다. 설정을 확인해주세요.":l.value=m.message||"데이터소스 쿼리 중 오류가 발생했습니다.",console.error("Error fetching data source:",m)}finally{v.value=!1}}};return(m,o)=>(i(),n("div",V,[o[16]||(o[16]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Terraform 데이터소스 쿼리"),e("p",{class:"mt-2 text-gray-600"}," AWS, GCP, Azure의 클라우드 리소스 정보를 Terraform 데이터소스로 조회하세요. ")],-1)),e("div",M,[e("div",j,[e("form",{onSubmit:A(T,["prevent"]),class:"space-y-6"},[e("div",null,[o[5]||(o[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 클라우드 프로바이더 ",-1)),f(e("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>y(r)?r.value=s:null),onChange:h,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:""},o[4]||(o[4]=[e("option",{value:""},"프로바이더를 선택하세요",-1),e("option",{value:"aws"},"AWS",-1),e("option",{value:"google"},"Google Cloud Platform",-1),e("option",{value:"azurerm"},"Microsoft Azure",-1)]),544),[[k,t(r)]])]),e("div",null,[o[7]||(o[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 데이터 타입 ",-1)),f(e("select",{"onUpdate:modelValue":o[1]||(o[1]=s=>y(d)?d.value=s:null),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:!t(r),required:""},[o[6]||(o[6]=e("option",{value:""},"데이터 타입을 선택하세요",-1)),(i(!0),n(N,null,P(t(S),s=>(i(),n("option",{key:s,value:s},x(s),9,D))),128))],8,O),[[k,t(d)]])]),e("div",null,[o[8]||(o[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 데이터 이름 ",-1)),f(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>y(p)?p.value=s:null),type:"text",placeholder:"예: current, default, this",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:""},null,512),[[z,t(p)]])]),e("div",null,[o[9]||(o[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 설정 (JSON) ",-1)),f(e("textarea",{"onUpdate:modelValue":o[3]||(o[3]=s=>y(g)?g.value=s:null),rows:"5",placeholder:'예: {"most_recent": true, "owners": ["amazon"]}',class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono text-sm"},null,512),[[z,t(g)]]),o[10]||(o[10]=e("p",{class:"mt-1 text-xs text-gray-500"}," JSON 형식으로 설정을 입력하세요. 빈 객체 {}도 가능합니다. ",-1))]),e("div",null,[e("button",{type:"submit",disabled:!t(b)||t(v),class:"w-full px-6 py-3 bg-primary-600 text-white font-medium rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[t(v)?(i(),n("span",B,o[11]||(o[11]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" 쿼리 중... ",-1)]))):(i(),n("span",J,"데이터소스 쿼리"))],8,q)])],32),t(l)?(i(),n("div",U,[e("div",E,[o[13]||(o[13]=e("svg",{class:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",F,[o[12]||(o[12]=e("h3",{class:"text-sm font-medium text-red-800"},"오류 발생",-1)),e("div",G,x(t(l)),1)])])])):w("",!0),t(c)?(i(),n("div",W,[o[14]||(o[14]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"쿼리 결과",-1)),e("div",I,[e("pre",H,x(JSON.stringify(t(c),null,2)),1)])])):w("",!0)]),o[15]||(o[15]=e("div",{class:"mt-8 bg-blue-50 rounded-lg p-6"},[e("h3",{class:"text-lg font-medium text-blue-900 mb-3"},"💡 사용 팁"),e("div",{class:"space-y-2 text-sm text-blue-800"},[e("p",null,[u("• "),e("strong",null,"AWS AMI 조회:"),u(' Provider: aws, Data Type: aws_ami, Config: {"most_recent": true, "owners": ["amazon"]}')]),e("p",null,[u("• "),e("strong",null,"GCP 영역 조회:"),u(' Provider: google, Data Type: google_compute_zones, Config: {"project": "your-project-id"}')]),e("p",null,[u("• "),e("strong",null,"Azure 구독 정보:"),u(" Provider: azurerm, Data Type: azurerm_subscription, Config: {}")])])],-1))])]))}};export{R as default};
