import{r as u,k as f,c as r,a as s,l as S,m as y,n as V,p as g,v as _,j as t,q as b,F as I,s as M,x as N,d as j,t as v,o as a}from"./DrDt6dME.js";const A={class:"px-4 sm:px-6 lg:px-8"},P={class:"max-w-4xl mx-auto"},z={class:"bg-white rounded-lg shadow p-6"},L=["disabled"],O=["value"],B=["disabled"],E={key:0,class:"flex items-center justify-center"},T={key:1},J={key:0,class:"mt-6 p-4 bg-red-50 border border-red-200 rounded-md"},q={class:"flex"},F={class:"ml-3"},U={class:"mt-2 text-sm text-red-700"},D={key:1,class:"mt-6"},G={class:"bg-gray-50 rounded-md p-4"},W={class:"text-sm text-gray-800 overflow-x-auto whitespace-pre-wrap"},R={__name:"index",setup(H){const o=u(""),i=u(""),c=u(""),m=u(""),n=u(""),p=u(!1),w={aws:[{value:"s3_ls",label:"S3 버킷 목록 조회",description:"aws s3 ls"},{value:"ec2_describe_instances",label:"EC2 인스턴스 정보 조회",description:"aws ec2 describe-instances"},{value:"iam_list_users",label:"IAM 사용자 목록 조회",description:"aws iam list-users"},{value:"vpc_describe_vpcs",label:"VPC 정보 조회",description:"aws ec2 describe-vpcs"}],gcp:[{value:"gcloud_zones_list",label:"컴퓨팅 영역 목록 조회",description:"gcloud compute zones list"},{value:"gcloud_projects_list",label:"프로젝트 목록 조회",description:"gcloud projects list"},{value:"gcloud_storage_buckets_list",label:"스토리지 버킷 목록 조회",description:"gcloud storage buckets list"},{value:"gcloud_compute_instances_list",label:"컴퓨팅 인스턴스 목록 조회",description:"gcloud compute instances list"}]},h=f(()=>o.value?w[o.value]||[]:[]),x=f(()=>o.value&&i.value),k=()=>{i.value="",m.value="",n.value=""},C=async()=>{if(x.value){p.value=!0,n.value="",m.value="";try{let d={};if(c.value.trim())try{d=JSON.parse(c.value)}catch{throw new Error("JSON 형식이 올바르지 않습니다. 인수를 확인해주세요.")}const e=await $fetch("/api/v1/cli/read-only",{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":"my_mcp_eagle_tiger"},body:{provider:o.value,command_name:i.value,args:d}});e.success?m.value=e.stdout||"명령어가 성공적으로 실행되었습니다.":n.value=e.stderr||"명령어 실행 중 오류가 발생했습니다."}catch(d){n.value=d.message||"CLI 명령어 실행 중 오류가 발생했습니다.",console.error("Error executing CLI command:",d)}finally{p.value=!1}}};return(d,e)=>(a(),r("div",A,[e[14]||(e[14]=s("div",{class:"mb-8"},[s("h1",{class:"text-3xl font-bold text-gray-900"},"CLI 읽기 전용 실행"),s("p",{class:"mt-2 text-gray-600"}," 안전한 읽기 전용 CLI 명령을 실행하여 클라우드 리소스 정보를 조회하세요. ")],-1)),s("div",P,[s("div",z,[s("form",{onSubmit:V(C,["prevent"]),class:"space-y-6"},[s("div",null,[e[4]||(e[4]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 클라우드 프로바이더 ",-1)),g(s("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>b(o)?o.value=l:null),onChange:k,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:""},[...e[3]||(e[3]=[s("option",{value:""},"프로바이더를 선택하세요",-1),s("option",{value:"aws"},"AWS",-1),s("option",{value:"gcp"},"Google Cloud Platform",-1)])],544),[[_,t(o)]])]),s("div",null,[e[6]||(e[6]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 실행할 명령어 ",-1)),g(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>b(i)?i.value=l:null),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:!t(o),required:""},[e[5]||(e[5]=s("option",{value:""},"명령어를 선택하세요",-1)),(a(!0),r(I,null,M(t(h),l=>(a(),r("option",{key:l.value,value:l.value},v(l.label)+" ("+v(l.description)+") ",9,O))),128))],8,L),[[_,t(i)]])]),s("div",null,[e[7]||(e[7]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 명령어 인수 (JSON 형식) ",-1)),g(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>b(c)?c.value=l:null),rows:"4",placeholder:'예: {"region": "us-east-1", "bucket": "my-bucket"}',class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono text-sm"},null,512),[[N,t(c)]]),e[8]||(e[8]=s("p",{class:"mt-1 text-xs text-gray-500"}," JSON 형식으로 명령어 인수를 입력하세요. 인수가 필요하지 않으면 비워두세요. ",-1))]),s("div",null,[s("button",{type:"submit",disabled:!t(x)||t(p),class:"w-full px-6 py-3 bg-primary-600 text-white font-medium rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[t(p)?(a(),r("span",E,[...e[9]||(e[9]=[s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),j(" 실행 중... ",-1)])])):(a(),r("span",T,"명령어 실행"))],8,B)])],32),t(n)?(a(),r("div",J,[s("div",q,[e[11]||(e[11]=s("svg",{class:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("div",F,[e[10]||(e[10]=s("h3",{class:"text-sm font-medium text-red-800"},"오류 발생",-1)),s("div",U,v(t(n)),1)])])])):y("",!0),t(m)?(a(),r("div",D,[e[12]||(e[12]=s("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"실행 결과",-1)),s("div",G,[s("pre",W,v(t(m)),1)])])):y("",!0)]),e[13]||(e[13]=S('<div class="mt-8 bg-green-50 rounded-lg p-6"><h3 class="text-lg font-medium text-green-900 mb-3">🔒 보안 정보</h3><div class="space-y-2 text-sm text-green-800"><p>• <strong>읽기 전용:</strong> 모든 CLI 명령은 읽기 전용으로만 실행됩니다.</p><p>• <strong>화이트리스트:</strong> 미리 승인된 안전한 명령어만 실행 가능합니다.</p><p>• <strong>감사 로그:</strong> 모든 명령어 실행은 로그에 기록됩니다.</p><p>• <strong>권한 제한:</strong> 인프라 변경을 위한 명령어는 Terraform을 통해 실행하세요.</p></div></div><div class="mt-8 bg-blue-50 rounded-lg p-6"><h3 class="text-lg font-medium text-blue-900 mb-3">📋 지원 명령어 목록</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><h4 class="font-medium text-blue-800 mb-2">AWS</h4><ul class="space-y-1 text-sm text-blue-700"><li>• s3_ls - S3 버킷 목록 조회</li><li>• ec2_describe_instances - EC2 인스턴스 정보 조회</li><li>• iam_list_users - IAM 사용자 목록 조회</li><li>• vpc_describe_vpcs - VPC 정보 조회</li></ul></div><div><h4 class="font-medium text-blue-800 mb-2">GCP</h4><ul class="space-y-1 text-sm text-blue-700"><li>• gcloud_zones_list - 컴퓨팅 영역 목록 조회</li><li>• gcloud_projects_list - 프로젝트 목록 조회</li><li>• gcloud_storage_buckets_list - 스토리지 버킷 목록 조회</li><li>• gcloud_compute_instances_list - 컴퓨팅 인스턴스 목록 조회</li></ul></div></div></div>',2))])]))}};export{R as default};
