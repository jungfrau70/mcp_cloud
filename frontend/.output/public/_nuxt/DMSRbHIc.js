import{r as u,x as V,c as l,a as e,k as i,F as y,q as f,m as x,s as T,y as O,v as $,t as r,d as c,o,z as M}from"./viYGKOJa.js";import{_ as E}from"./DlAUqK2U.js";var U={};const R={class:"min-h-screen bg-gray-50 py-8"},z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},B={class:"mb-6"},F={class:"flex space-x-8"},W=["onClick"],X={key:0,class:"bg-white rounded-lg shadow"},J={class:"p-6"},Q={class:"bg-gray-50 rounded-lg p-4 h-96 overflow-y-auto mb-4"},Y={class:"text-sm"},H={key:0,class:"text-left"},Z={class:"flex space-x-2"},ee=["disabled"],se={key:1,class:"bg-white rounded-lg shadow"},te={class:"p-6"},le={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},oe={class:"mb-4"},re={class:"mb-4"},ae=["disabled"],ie={key:0},ne={key:1},de={key:0,class:"space-y-4"},ue={class:"bg-gray-50 rounded-lg p-4"},ce={class:"space-y-3"},me={class:"text-xs bg-gray-800 text-green-400 p-2 rounded overflow-x-auto"},pe={class:"text-xs bg-gray-800 text-green-400 p-2 rounded overflow-x-auto"},ve={class:"text-xs bg-gray-800 text-green-400 p-2 rounded overflow-x-auto"},ge={class:"bg-blue-50 rounded-lg p-4"},be={class:"text-sm text-blue-800 space-y-2"},ye={key:2,class:"bg-white rounded-lg shadow"},fe={class:"p-6"},xe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},_e={class:"mb-4"},we={class:"mb-4"},he=["disabled"],ke={key:0},Pe={key:1},Ce={key:0,class:"space-y-4"},Ae={class:"bg-purple-50 rounded-lg p-4"},Se={class:"text-sm text-purple-800 space-y-2"},De={key:0},Te={class:"ml-4 space-y-1"},Ie={class:"bg-green-50 rounded-lg p-4"},Ve={class:"text-sm text-green-800"},$e={class:"space-y-1"},Me={class:"bg-blue-50 rounded-lg p-4"},Ne={class:"text-sm text-blue-800 space-y-2"},Ue={key:0},qe={class:"ml-4 space-y-1"},Ge={key:3,class:"bg-white rounded-lg shadow"},je={class:"p-6"},Ke={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Le={class:"mb-4"},Oe={class:"mb-4"},Ee=["disabled"],Re={key:0},ze={key:1},Be={key:0,class:"space-y-4"},Fe={class:"bg-red-50 rounded-lg p-4"},We={class:"text-center"},Xe={class:"text-3xl font-bold text-red-600"},Je={class:"text-sm text-red-700 mt-1"},Qe={key:0,class:"bg-red-100 rounded-lg p-4"},Ye={class:"text-sm text-red-800 space-y-1"},He={key:1,class:"bg-orange-100 rounded-lg p-4"},Ze={class:"text-sm text-orange-800 space-y-1"},es={class:"bg-blue-50 rounded-lg p-4"},ss={class:"text-sm text-blue-800"},ts={class:"space-y-1"},ls={__name:"ai-assistant",setup(os){const _=u("chat"),q=[{id:"chat",name:"AI 어시스턴트"},{id:"terraform",name:"Terraform 생성"},{id:"cost",name:"비용 분석"},{id:"security",name:"보안 감사"}],w=u([]),b=u(""),k=u(!1),p=V({cloudProvider:"aws",requirements:""}),m=u(null),P=u(!1),v=V({cloudProvider:"aws",infrastructureDescription:""}),n=u(null),C=u(!1),g=V({cloudProvider:"aws",infrastructureDescription:""}),d=u(null),A=u(!1),S=U.MCP_API_KEY||"my_mcp_eagle_tiger",D=U.NUXT_PUBLIC_API_BASE_URL||"http://localhost:7000",N=async()=>{if(!b.value.trim()||k.value)return;const a={id:Date.now(),role:"user",content:b.value};w.value.push(a);const s=b.value;b.value="",k.value=!0;try{const h=await(await fetch(`${D}/ai/assistant/query-sync`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":S},body:JSON.stringify({question:s})})).json();if(h.success){const I={id:Date.now()+1,role:"assistant",content:h.answer};w.value.push(I)}else{const I={id:Date.now()+1,role:"assistant",content:`오류가 발생했습니다: ${h.error}`};w.value.push(I)}}catch(t){const h={id:Date.now()+1,role:"assistant",content:`네트워크 오류가 발생했습니다: ${t.message}`};w.value.push(h)}finally{k.value=!1}},G=async()=>{if(!(!p.requirements.trim()||P.value)){P.value=!0;try{const s=await(await fetch(`${D}/ai/terraform/generate`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":S},body:JSON.stringify({requirements:p.requirements,cloud_provider:p.cloudProvider})})).json();s.success?m.value=s.result:alert(`오류가 발생했습니다: ${s.error}`)}catch(a){alert(`네트워크 오류가 발생했습니다: ${a.message}`)}finally{P.value=!1}}},j=async()=>{if(!(!v.infrastructureDescription.trim()||C.value)){C.value=!0;try{const s=await(await fetch(`${D}/ai/cost/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":S},body:JSON.stringify({infrastructure_description:v.infrastructureDescription,cloud_provider:v.cloudProvider})})).json();s.success?n.value=s.result:alert(`오류가 발생했습니다: ${s.error}`)}catch(a){alert(`네트워크 오류가 발생했습니다: ${a.message}`)}finally{C.value=!1}}},K=async()=>{if(!(!g.infrastructureDescription.trim()||A.value)){A.value=!0;try{const s=await(await fetch(`${D}/ai/security/audit`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":S},body:JSON.stringify({infrastructure_description:g.infrastructureDescription,cloud_provider:g.cloudProvider})})).json();s.success?d.value=s.result:alert(`오류가 발생했습니다: ${s.error}`)}catch(a){alert(`네트워크 오류가 발생했습니다: ${a.message}`)}finally{A.value=!1}}},L=a=>a>=90?"매우 안전":a>=80?"안전":a>=70?"보통":a>=60?"주의 필요":"위험";return w.value.push({id:1,role:"assistant",content:"안녕하세요! AWS와 GCP 클라우드 전문가입니다. 어떤 도움이 필요하신가요?"}),(a,s)=>(o(),l("div",R,[e("div",z,[s[45]||(s[45]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"AI 클라우드 어시스턴트"),e("p",{class:"mt-2 text-gray-600"}," AWS와 GCP 클라우드 인프라 설계, 비용 분석, 보안 감사를 AI와 함께 수행하세요 ")],-1)),e("div",B,[e("nav",F,[(o(),l(y,null,f(q,t=>e("button",{key:t.id,onClick:h=>_.value=t.id,class:M([_.value===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])},r(t.name),11,W)),64))])]),_.value==="chat"?(o(),l("div",X,[e("div",J,[s[8]||(s[8]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"클라우드 전문가와 대화하기",-1)),e("div",Q,[(o(!0),l(y,null,f(w.value,t=>(o(),l("div",{key:t.id,class:"mb-4"},[e("div",{class:M(t.role==="user"?"text-right":"text-left")},[e("div",{class:M([t.role==="user"?"bg-blue-500 text-white ml-auto":"bg-white text-gray-900","inline-block rounded-lg px-4 py-2 max-w-xs lg:max-w-md shadow-sm"])},[e("p",Y,r(t.content),1)],2)],2)]))),128)),k.value?(o(),l("div",H,s[7]||(s[7]=[e("div",{class:"bg-white text-gray-900 inline-block rounded-lg px-4 py-2 shadow-sm"},[e("div",{class:"flex items-center space-x-2"},[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),e("span",{class:"text-sm"},"AI가 답변을 생성하고 있습니다...")])],-1)]))):i("",!0)]),e("div",Z,[x(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>b.value=t),onKeyup:O(N,["enter"]),type:"text",placeholder:"클라우드 관련 질문을 입력하세요...",class:"flex-1 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,544),[[T,b.value]]),e("button",{onClick:N,disabled:!b.value.trim()||k.value,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"}," 전송 ",8,ee)])])])):i("",!0),_.value==="terraform"?(o(),l("div",se,[e("div",te,[s[21]||(s[21]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Terraform 코드 생성",-1)),e("div",le,[e("div",null,[e("div",oe,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"클라우드 제공자",-1)),x(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>p.cloudProvider=t),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},s[9]||(s[9]=[e("option",{value:"aws"},"AWS",-1),e("option",{value:"gcp"},"GCP",-1)]),512),[[$,p.cloudProvider]])]),e("div",re,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"인프라 요구사항",-1)),x(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=t=>p.requirements=t),rows:"6",placeholder:"예: 3개의 가용영역에 걸친 고가용성 VPC를 생성하고, 각 가용영역에 public과 private 서브넷을 만들고, NAT Gateway를 설정해주세요.",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[T,p.requirements]])]),e("button",{onClick:G,disabled:!p.requirements.trim()||P.value,class:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed"},[P.value?(o(),l("span",ie,"생성 중...")):(o(),l("span",ne,"코드 생성"))],8,ae)]),e("div",null,[m.value?(o(),l("div",de,[e("div",ue,[s[15]||(s[15]=e("h3",{class:"font-medium text-gray-900 mb-2"},"생성된 코드",-1)),e("div",ce,[e("div",null,[s[12]||(s[12]=e("h4",{class:"text-sm font-medium text-gray-700"},"main.tf",-1)),e("pre",me,r(m.value.main_tf),1)]),e("div",null,[s[13]||(s[13]=e("h4",{class:"text-sm font-medium text-gray-700"},"variables.tf",-1)),e("pre",pe,r(m.value.variables_tf),1)]),e("div",null,[s[14]||(s[14]=e("h4",{class:"text-sm font-medium text-gray-700"},"outputs.tf",-1)),e("pre",ve,r(m.value.outputs_tf),1)])])]),e("div",ge,[s[20]||(s[20]=e("h3",{class:"font-medium text-blue-900 mb-2"},"추가 정보",-1)),e("div",be,[e("p",null,[s[16]||(s[16]=e("strong",null,"설명:",-1)),c(" "+r(m.value.description),1)]),e("p",null,[s[17]||(s[17]=e("strong",null,"예상 비용:",-1)),c(" "+r(m.value.estimated_cost),1)]),e("p",null,[s[18]||(s[18]=e("strong",null,"보안 주의사항:",-1)),c(" "+r(m.value.security_notes),1)]),e("p",null,[s[19]||(s[19]=e("strong",null,"모범 사례:",-1)),c(" "+r(m.value.best_practices),1)])])])])):i("",!0)])])])])):i("",!0),_.value==="cost"?(o(),l("div",ye,[e("div",fe,[s[33]||(s[33]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"인프라 비용 분석",-1)),e("div",xe,[e("div",null,[e("div",_e,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"클라우드 제공자",-1)),x(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>v.cloudProvider=t),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},s[22]||(s[22]=[e("option",{value:"aws"},"AWS",-1),e("option",{value:"gcp"},"GCP",-1)]),512),[[$,v.cloudProvider]])]),e("div",we,[s[24]||(s[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"인프라 설명",-1)),x(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=t=>v.infrastructureDescription=t),rows:"6",placeholder:"예: 3개의 가용영역에 걸친 VPC, 각 가용영역에 public/private 서브넷, NAT Gateway, 3개의 t3.medium EC2 인스턴스, RDS MySQL 인스턴스",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[T,v.infrastructureDescription]])]),e("button",{onClick:j,disabled:!v.infrastructureDescription.trim()||C.value,class:"w-full px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed"},[C.value?(o(),l("span",ke,"분석 중...")):(o(),l("span",Pe,"비용 분석"))],8,he)]),e("div",null,[n.value?(o(),l("div",Ce,[e("div",Ae,[s[27]||(s[27]=e("h3",{class:"font-medium text-purple-900 mb-2"},"비용 분석 결과",-1)),e("div",Se,[e("p",null,[s[25]||(s[25]=e("strong",null,"예상 월 비용:",-1)),c(" "+r(n.value.estimated_monthly_cost),1)]),n.value.cost_breakdown?(o(),l("div",De,[s[26]||(s[26]=e("p",{class:"font-medium"},"비용 세부사항:",-1)),e("ul",Te,[e("li",null,"컴퓨팅: "+r(n.value.cost_breakdown.compute),1),e("li",null,"스토리지: "+r(n.value.cost_breakdown.storage),1),e("li",null,"네트워크: "+r(n.value.cost_breakdown.network),1),e("li",null,"기타: "+r(n.value.cost_breakdown.other),1)])])):i("",!0)])]),e("div",Ie,[s[29]||(s[29]=e("h3",{class:"font-medium text-green-900 mb-2"},"최적화 기회",-1)),e("div",Ve,[e("ul",$e,[(o(!0),l(y,null,f(n.value.optimization_opportunities,t=>(o(),l("li",{key:t,class:"flex items-start"},[s[28]||(s[28]=e("span",{class:"text-green-500 mr-2"},"•",-1)),c(" "+r(t),1)]))),128))])])]),e("div",Me,[s[32]||(s[32]=e("h3",{class:"font-medium text-blue-900 mb-2"},"권장사항",-1)),e("div",Ne,[n.value.reserved_instances?(o(),l("div",Ue,[s[31]||(s[31]=e("p",{class:"font-medium"},"예약 인스턴스:",-1)),e("ul",qe,[(o(!0),l(y,null,f(n.value.reserved_instances,t=>(o(),l("li",{key:t,class:"flex items-start"},[s[30]||(s[30]=e("span",{class:"text-blue-500 mr-2"},"•",-1)),c(" "+r(t),1)]))),128))])])):i("",!0)])])])):i("",!0)])])])])):i("",!0),_.value==="security"?(o(),l("div",Ge,[e("div",je,[s[44]||(s[44]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"인프라 보안 감사",-1)),e("div",Ke,[e("div",null,[e("div",Le,[s[35]||(s[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"클라우드 제공자",-1)),x(e("select",{"onUpdate:modelValue":s[5]||(s[5]=t=>g.cloudProvider=t),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},s[34]||(s[34]=[e("option",{value:"aws"},"AWS",-1),e("option",{value:"gcp"},"GCP",-1)]),512),[[$,g.cloudProvider]])]),e("div",Oe,[s[36]||(s[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"인프라 설명",-1)),x(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=t=>g.infrastructureDescription=t),rows:"6",placeholder:"예: 3개의 가용영역에 걸친 VPC, 각 가용영역에 public/private 서브넷, NAT Gateway, 3개의 t3.medium EC2 인스턴스, RDS MySQL 인스턴스",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[T,g.infrastructureDescription]])]),e("button",{onClick:K,disabled:!g.infrastructureDescription.trim()||A.value,class:"w-full px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed"},[A.value?(o(),l("span",Re,"감사 중...")):(o(),l("span",ze,"보안 감사"))],8,Ee)]),e("div",null,[d.value?(o(),l("div",Be,[e("div",Fe,[s[37]||(s[37]=e("h3",{class:"font-medium text-red-900 mb-2"},"보안 점수",-1)),e("div",We,[e("div",Xe,r(d.value.security_score)+"/100",1),e("div",Je,r(L(d.value.security_score)),1)])]),d.value.critical_issues&&d.value.critical_issues.length>0?(o(),l("div",Qe,[s[39]||(s[39]=e("h3",{class:"font-medium text-red-900 mb-2"},"치명적 보안 이슈",-1)),e("ul",Ye,[(o(!0),l(y,null,f(d.value.critical_issues,t=>(o(),l("li",{key:t,class:"flex items-start"},[s[38]||(s[38]=e("span",{class:"text-red-500 mr-2"},"⚠️",-1)),c(" "+r(t),1)]))),128))])])):i("",!0),d.value.high_risk_issues&&d.value.high_risk_issues.length>0?(o(),l("div",He,[s[41]||(s[41]=e("h3",{class:"font-medium text-orange-900 mb-2"},"높은 위험도 이슈",-1)),e("ul",Ze,[(o(!0),l(y,null,f(d.value.high_risk_issues,t=>(o(),l("li",{key:t,class:"flex items-start"},[s[40]||(s[40]=e("span",{class:"text-orange-500 mr-2"},"⚠️",-1)),c(" "+r(t),1)]))),128))])])):i("",!0),e("div",es,[s[43]||(s[43]=e("h3",{class:"font-medium text-blue-900 mb-2"},"보안 권장사항",-1)),e("div",ss,[e("ul",ts,[(o(!0),l(y,null,f(d.value.security_recommendations,t=>(o(),l("li",{key:t,class:"flex items-start"},[s[42]||(s[42]=e("span",{class:"text-blue-500 mr-2"},"•",-1)),c(" "+r(t),1)]))),128))])])])])):i("",!0)])])])])):i("",!0)])]))}},is=E(ls,[["__scopeId","data-v-b3b0584d"]]);export{is as default};
