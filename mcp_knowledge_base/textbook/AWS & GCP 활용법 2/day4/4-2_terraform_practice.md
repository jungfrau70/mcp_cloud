# 4-2. TerraformμΌλ΅ AWS/GCP μΈν”„λΌ κµ¬μ¶• μ‹¤μµ

μ΄ μ±•ν„°μ—μ„λ” `4-1`μ—μ„ λ°°μ΄ Terraform κΈ°λ³Έ κ°λ…μ„ λ°”νƒ•μΌλ΅, μ‹¤μ λ΅ AWSμ™€ GCPμ— κ°„λ‹¨ν• μΈν”„λΌλ¥Ό κµ¬μ¶•ν•λ” ν•Έμ¦μ¨ μ‹¤μµμ„ μ§„ν–‰ν•©λ‹λ‹¤. μ½”λ“λ¥Ό ν†µν•΄ ν΄λΌμ°λ“ λ¦¬μ†μ¤κ°€ μƒμ„±λκ³  κ΄€λ¦¬λλ” κ³Όμ •μ„ μ§μ ‘ κ²½ν—ν•΄λ³΄μ„Έμ”.

---

### μ‹¤μµ λ©ν‘

- **AWS:** Terraformμ„ μ‚¬μ©ν•μ—¬ μ‹¤μµμ© VPC, μ„λΈλ„·, λ³΄μ• κ·Έλ£Ή, κ·Έλ¦¬κ³  EC2 μΈμ¤ν„΄μ¤ ν• λ€λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
- **GCP:** Terraformμ„ μ‚¬μ©ν•μ—¬ μ‹¤μµμ© VPC, μ„λΈλ„·, λ°©ν™”λ²½ κ·μΉ™, κ·Έλ¦¬κ³  Compute Engine μΈμ¤ν„΄μ¤ ν• λ€λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

### μ‹¤μµ μ¤€λΉ„

- `1-2_account_setup.md` μ™€ `2-1_cli_setup.md` μ±•ν„°κ°€ μ™„λ£λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.
- κ° ν΄λΌμ°λ“ CLIλ¥Ό ν†µν•΄ μΈμ¦μ΄ μ™„λ£λ μƒνƒμ—¬μ•Ό ν•©λ‹λ‹¤.
- `μΈν„°λ™ν‹°λΈ ν•™μµ λ„κµ¬`μ `ν™κ²½ μ κ²€/μ¤μΊν΄λ“`μ—μ„ μ κ³µν•λ” Terraform ν…ν”λ¦Ώ(`main.tf`)μ„ μ‹¤μµν•  ν΄λ”μ— λ‹¤μ΄λ΅λ“ λ°›μ•„ μ¤€λΉ„ν•©λ‹λ‹¤.

---

### μ‹¤μµ 1: TerraformμΌλ΅ AWS μΈν”„λΌ κµ¬μ¶•ν•κΈ°

1.  **Provider μ„¤μ •:** `main.tf` νμΌμ— AWS providerλ¥Ό μ„¤μ •ν•©λ‹λ‹¤.

    ```terraform
    terraform {
      required_providers {
        aws = {
          source  = "hashicorp/aws"
          version = "~> 5.0"
        }
      }
    }

    provider "aws" {
      region = "ap-northeast-2" # μ„μΈ λ¦¬μ „
    }
    ```

2.  **λ¦¬μ†μ¤ μ •μ:** VPC, μ„λΈλ„·, EC2 μΈμ¤ν„΄μ¤ λ¦¬μ†μ¤λ¥Ό `main.tf` νμΌμ— μ¶”κ°€ν•©λ‹λ‹¤.

3.  **μΈν”„λΌ μƒμ„±:**
    -   `terraform init` λ…λ Ήμ–΄λ΅ μ΄κΈ°ν™”ν•©λ‹λ‹¤.
    -   `terraform plan` λ…λ Ήμ–΄λ΅ μ‹¤ν–‰ κ³„νμ„ κ²€ν† ν•©λ‹λ‹¤.
    -   `terraform apply` λ…λ Ήμ–΄λ΅ μ‹¤μ λ΅ μΈν”„λΌλ¥Ό μƒμ„±ν•©λ‹λ‹¤.

4.  **μƒνƒ ν™•μΈ:** `terraform.tfstate` νμΌμ΄ μƒμ„±λκ³ , λ‚΄λ¶€μ— μƒμ„±λ λ¦¬μ†μ¤ μ •λ³΄κ°€ JSON ν•νƒλ΅ κΈ°λ΅λ κ²ƒμ„ ν™•μΈν•©λ‹λ‹¤. μ΄ νμΌμ„ ν†µν•΄ Terraformμ΄ μ–΄λ–¤ λ¦¬μ†μ¤λ¥Ό κ΄€λ¦¬ν•κ³  μλ”μ§€ μ¶”μ ν•©λ‹λ‹¤.

5.  **λ¦¬μ†μ¤ μ •λ¦¬:** `terraform destroy` λ…λ Ήμ–΄λ΅ μƒμ„±ν–λ λ¨λ“  λ¦¬μ†μ¤λ¥Ό ν• λ²μ— μ‚­μ ν•©λ‹λ‹¤.

### μ‹¤μµ 2: TerraformμΌλ΅ GCP μΈν”„λΌ κµ¬μ¶•ν•κΈ°

1.  **Provider μ„¤μ •:** `main.tf` νμΌμ— GCP providerλ¥Ό μ„¤μ •ν•©λ‹λ‹¤.

    ```terraform
    terraform {
      required_providers {
        google = {
          source  = "hashicorp/google"
          version = "~> 5.0"
        }
      }
    }

    provider "google" {
      project = "your-gcp-project-id" # λ³ΈμΈμ GCP ν”„λ΅μ νΈ ID
      region  = "asia-northeast3"   # μ„μΈ λ¦¬μ „
    }
    ```

2.  **λ¦¬μ†μ¤ μ •μ:** VPC, μ„λΈλ„·, Compute Engine μΈμ¤ν„΄μ¤ λ¦¬μ†μ¤λ¥Ό `main.tf` νμΌμ— μ¶”κ°€ν•©λ‹λ‹¤.

3.  **μΈν”„λΌ μƒμ„± λ° μ •λ¦¬:** AWS μ‹¤μµκ³Ό λ™μΌν•κ² `init` -> `plan` -> `apply` -> `destroy` μμ„λ΅ λ…λ Ήμ„ μ‹¤ν–‰ν•λ©° κ° λ‹¨κ³„μ λ³€ν™”λ¥Ό κ΄€μ°°ν•©λ‹λ‹¤.

---

### π”¬ κ΄€λ ¨ λ„κµ¬ λ° μ‹¤μµ μ™„λ£ κ²€μ¦

- **μ‹¤μµ μ™„λ£ κ²€μ¦:** `appendix_practice_guide.md` μ±•ν„°μ `μ‹¤μµ μ™„λ£ κ²€μ¦` λ„κµ¬λ¥Ό μ‚¬μ©ν•μ—¬, μ΄ μ±•ν„°μ Terraform μ‹¤μµμΌλ΅ μƒμ„±ν• S3 λ²„ν‚·μ΄λ‚ Cloud Storage λ²„ν‚·μ΄ μ‹¤μ λ΅ μ λ§λ“¤μ–΄μ΅λ”μ§€ ν™•μΈν•΄λ³΄μ„Έμ”. (μ‹¤μµ λ‚΄μ©μ— λ²„ν‚· μƒμ„±μ„ μ¶”κ°€ν•΄λ³΄μ„Έμ”!)
- **ν…ν”λ¦Ώ λ‹¤μ΄λ΅λ“:** `ν™κ²½ μ κ²€/μ¤μΊν΄λ“` λ„κµ¬μ—μ„ μ κ³µν•λ” Terraform ν…ν”λ¦Ώμ€ μ΄ μ±•ν„°μ μ‹¤μµμ„ μ„ν• ν›λ¥­ν• μ‹μ‘μ μ…λ‹λ‹¤.
