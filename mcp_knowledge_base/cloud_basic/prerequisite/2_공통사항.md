실습 사전준비사항 (공통)
==============

요약
--

- 계정/권한 준비(참가자=Contributor), MFA 필수, 비용 권한은 재무 전담
- CLI 설치 및 로그인(az, aws, gcloud), 공통 리전/명명/태깅 합의
- 예산/알림 선설정, 샘플 자산(site/) 준비, 비밀관리 선택
- IaC 리포지토리/PR 보호/보안스캔 파이프라인 준비
- 역할 분리 수칙 적용(`ROLE=cost-manager` 시 변경 스크립트 차단)

1) 계정/권한
--------

*   Azure/AWS/GCP (학습용) 구독/프로젝트/계정 준비(과금/예산 한도 설정)
    
*   권장 권한: Owner/Administrator 1명(교관), 참가자는 Contributor/개발자 역할
    
*   결제/청구 접근 권한은 최소 인원으로 제한(재무 담당자)
    

2) 도구/환경
--------

*   CLI 설치: az, awscli, gcloud, kubectl(선택), terraform(선택)
    
*   설치 예:
    
    *   Windows: winget `Azure CLI`, `AWS CLI`, `Google Cloud SDK`, `Terraform`
        
    *   macOS: brew install azure-cli awscli google-cloud-sdk terraform
        
*   인증 설정: `az login`, `aws configure sso` 또는 `aws configure`, `gcloud auth login`
    
*   환경변수 예:
    

    setx AWS_PROFILE default
    setx AWS_REGION ap-northeast-2
    setx PROJECT_ID <GCP_PROJECT_ID>
    setx BILLING_ACCOUNT <GCP_BILLING_ACCOUNT_ID>
    setx SUB_ID <AZURE_SUBSCRIPTION_ID>
    

*   에디터/터미널: VS Code + 확장(Terraform/Azure/AWS/GCP) 권장
    

3) 표준 및 명명 규칙
-------------

*   리소스 명명: `<team>-<env>-<service>-<seq>` 예) dev-lab-web-01
    
*   태그/라벨: `project`, `department`, `env`, `owner`, `cost-center`
    
*   리전: 동일 리전 사용 권장(예: Azure Korea Central, AWS ap-northeast-2, GCP asia-northeast3)
    

4) 비용/예산/알림
-----------

*   예산 생성 및 알림(각 플랫폼 Budget) 설정
    
*   Cost Explorer/Cost Management 대시보드 뷰 저장
    

5) 리포지토리/자동화(선택)
----------------

*   Git 리포지토리 준비: `/infra`(Terraform)와 `/app`(애플리케이션) 분리
    
*   PR 보호 규칙: 리뷰 1+ 필수, CI에서 `plan`/lint/security scan 수행
    
*   워크플로: `.github/workflows/iac-ci.yml` 참고(tfsec/checkov)
    

6) 샘플 자산
--------

*   정적 웹 콘텐츠 `./site/` 폴더
    
*   도메인(Optional): DNS 실습용 서브도메인 준비 또는 nip.io 이용
    
*   테스트 스크립트: 부하/헬스체크/권한 검증 스크립트
    

7) 보안/비밀관리
----------

*   Secret Manager/Key Vault/Secrets Manager 중 하나 선정
    
*   크리덴셜 로테이션 전략 및 접근 로깅 활성화
    

8) 팀 역할/책임
----------

*   재무팀: 태깅/예산/알림 책임자 지정
    
*   DevOps: IaC/파이프라인/공통 모듈 책임자 지정
    
*   개발팀: 앱/헬스체크/기능 검증 담당
    
*   SRE: 모니터링/알림/런북 담당
    

9) 역할 분리 실행 수칙
--------------

*   env 파일의 `ROLE` 값을 `cost-manager`로 설정 시, 변경/프로비저닝 스크립트 실행 차단
    
*   비용관리자는 예산/비용/리포트 스크립트만 실행(AWS/Azure/GCP budget 스크립트)
    
*   DevOps는 리소스 생성/변경, 비용 권한 없이 수행
    

10) 플랫폼별 등록 절차 (역할: 재무담당자)
--------------------------

*   공통 원칙
    
    *   리소스 생성/변경 권한은 부여하지 않음(읽기/비용/예산 위주 역할만)
        
    *   예산 생성/알림 설정 권한이 필요한 경우에만 최소 범위로 추가 부여
        
    *   프로젝트/구독 단위 접근은 Viewer 수준 권장, Billing 스코프에서만 비용 역할 부여
        
*   AWS
    
    1.  Billing 콘솔에서 IAM 결제정보 액세스 활성화
        
        *   경로: `Account settings` → `IAM user and role access to Billing information` → Enable
            
    2.  `CostManagers` 그룹 생성 후 아래 관리형 정책 부여(필요 최소)
        
        *   `arn:aws:iam::aws:policy/job-function/Billing` (읽기 위주)
            
        *   `arn:aws:iam::aws:policy/AWSBudgetsReadOnlyAccess` (필요 시 `AWSBudgetsActionsWithAWSResourceControl`)
            
        *   `arn:aws:iam::aws:policy/ReadOnlyAccess` (선택: 콘솔 탐색 편의)
            
    3.  재무담당자 사용자(또는 SSO 그룹)를 그룹에 추가
        
    4.  CLI 예시
        
            aws iam create-group --group-name CostManagers
            aws iam attach-group-policy --group-name CostManagers \
              --policy-arn arn:aws:iam::aws:policy/job-function/Billing
            aws iam attach-group-policy --group-name CostManagers \
              --policy-arn arn:aws:iam::aws:policy/AWSBudgetsReadOnlyAccess
            # 사용자 추가
            aws iam add-user-to-group --user-name finance-user --group-name CostManagers
            
        
*   Azure
    
    1.  포털 경로
        
        *   `Cost Management + Billing` → `Billing scope`(결제 계정/프로필) → `Access control (IAM)`
            
        *   역할 할당: `Billing Reader`(결제 스코프), `Cost Management Reader`(구독/관리그룹 스코프)
            
        *   예산 생성 필요 시 해당 스코프에 `Cost Management Contributor` 최소 범위로 추가
            
    2.  구독/리소스 그룹에는 `Reader` 혹은 무권한 유지(리소스 변경 금지)
        
    3.  참고: 결제 스코프 권한은 구독 스코프와 별개로 관리됨
        
*   GCP
    
    1.  결제 계정 스코프에 역할 부여(콘솔)
        
        *   경로: `Billing` → `Account management` → `Permissions`
            
        *   역할: `Billing Account Viewer(roles/billing.viewer)` 또는 `Billing Account Costs Manager(roles/billing.costsManager)`
            
    2.  프로젝트에는 `Viewer(roles/viewer)` 정도만 부여(리소스 변경 금지)
        
    3.  gcloud 예시(결제 계정 권한 부여)
        
            gcloud beta billing accounts add-iam-policy-binding BILLING_ACCOUNT_ID \
              --member=user:finance@example.com --role=roles/billing.viewer
            # 예산 생성/관리 필요 시
            gcloud beta billing accounts add-iam-policy-binding BILLING_ACCOUNT_ID \
              --member=user:finance@example.com --role=roles/billing.costsManager
            
        

> 운영 팁: 비용 태그/라벨 표준을 비용관리자가 주기적으로 점검하고, 무태그 리소스 리포트를 DevOps와 공유해 보완 사이클을 유지합니다.

### 참고 및 권장 모델

*   계정 등록 가이드: [1_계정등록.md](mdc:mcp_knowledge_base/cloud_basic/prerequisite/1_계정등록.md)

*   권장 권한 모델(요약): [3_역할분담.md](mdc:mcp_knowledge_base/cloud_basic/prerequisite/3_역할분담.md)의 "권장 권한 모델(요약) — 재무 vs IT 운영" 절 참조
    
*   자동화 사용안내: [4_생산성툴.md](mdc:mcp_knowledge_base/cloud_basic/prerequisite/4_생산성툴.md)
  
*   아키텍처 개요: [실습_아키텍처개요.md](mdc:mcp_knowledge_base/cloud_basic/실습_아키텍처개요.md)

외부 참고
-----

- AWS
  - [AWS CLI 설치](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html)
  - [SSO 설정 가이드(aws configure sso)](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html)
  - [AWS Budgets 개요](https://docs.aws.amazon.com/cost-management/latest/userguide/budgets-managing-costs.html)
- Azure
  - [Azure CLI 설치](https://learn.microsoft.com/cli/azure/install-azure-cli)
  - [Entra ID MFA 시작하기](https://learn.microsoft.com/entra/identity/authentication/tutorial-enable-azure-mfa)
  - [Cost Management + Billing 예산](https://learn.microsoft.com/azure/cost-management-billing/costs/create-export-save-download-azure-cost-management-data#budgets)
- GCP
  - [Google Cloud SDK 설치](https://cloud.google.com/sdk/docs/install)
  - [gcloud 인증](https://cloud.google.com/sdk/docs/authorizing)
  - [Cloud Billing Budgets](https://cloud.google.com/billing/docs/how-to/budgets)