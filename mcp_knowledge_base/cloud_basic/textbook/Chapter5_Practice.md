# 통합 실습: 나만의 블로그 만들기 (Azure · AWS · GCP)

본 문서는 Chapter 1~4의 실습을 **"나만의 블로그 만들기"**라는 하나의 목표 아래 통합한 실습 가이드입니다.
각 단계는 블로그를 구성하는 요소를 하나씩 만들고, 그 과정에서 **비용 확인 및 리소스 정리**를 습관화하도록 구성되어 있습니다.

## "나만의 블로그 만들기" 실행 시나리오

- **Step 0 (준비 및 비용)**: CLI 환경을 확인하고, **가장 먼저 월 $5 예산을 설정하여 예상치 못한 비용을 막습니다.**
- **Step 1 (IAM)**: 블로그를 관리할 **나의 관리자 계정**을 최소 권한 원칙에 따라 만듭니다.
- **Step 2 (Storage)**: 블로그의 **이미지와 미디어 파일을 저장할 공간(버킷)**을 만듭니다. (Terraform 맛보기)
- **Step 3 (VM)**: 블로그 **애플리케이션이 실행될 서버(VM)**를 만들고, 고가용성을 위해 2대 이상으로 구성합니다. (장애 대응 실습)
- **Step 4 (Network)**: **외부 방문객이 내 블로그에 안전하게 접속**하도록 네트워크와 방화벽을 설정합니다. (장애 대응 실습)
- **Step 5 (정리 및 회고)**: **만들었던 모든 리소스를 깨끗하게 삭제**하고, 그 과정에서 발생한 비용을 확인하며 회고합니다.

> **권장 진행 순서**: 0 → 1 → 2 → 3 → 4 → 5 (순서대로 진행해야 합니다)

---

## Step 0: 프로젝트 준비 및 예산 설정 (FinOps 첫걸음)

클라우드를 사용할 때 가장 중요한 것은 **비용 관리**입니다. 실습을 시작하기 전, 의도치 않은 요금이 발생하지 않도록 예방 조치를 취합니다.

### 1) 예산 및 알림 설정 (필수!)
- **목표**: 월 예상 비용을 $5로 설정하고, 예산의 80%가 소진되면 나에게 이메일 알림이 오도록 설정합니다.
- **Azure**: `Cost Management + Billing` → `Budgets` → `Add`
- **AWS**: `AWS Budgets` → `Create budget`
- **GCP**: `결제` → `예산 및 알림` → `예산 만들기`
- **스크립트**: `cloud_basic/automation/cli/budget/` 경로의 스크립트를 활용할 수도 있습니다.

### 2) CLI 구성 및 확인
- `az --version`, `aws --version`, `gcloud --version`, `terraform version` 명령어로 도구가 모두 설치되었는지 확인합니다.
- `az login`, `aws configure`, `gcloud auth login` 등으로 각 클라우드에 로그인합니다.
- `az account show`, `aws sts get-caller-identity`, `gcloud config list`로 현재 계정 컨텍스트를 확인합니다.

---

## Step 1: 블로그 관리자 계정 만들기 (IAM)

- **목표**: 최소 권한 원칙에 따라 내 블로그를 관리할 IAM 사용자를 생성합니다.
- **실습**: [Chapter1_IAM.md](Chapter1_IAM.md)의 가이드를 따라 `blog-admin` 사용자를 만들고, `ReadOnlyAccess`와 같은 기본 정책을 연결합니다.
- **검증**: 생성한 사용자로 로그인하여, 리소스 조회가 가능한지, 하지만 생성/삭제는 불가능한지 확인합니다.

---

## Step 2: 블로그 이미지 저장소 만들기 (Storage)

- **목표**: 블로그에 사용할 이미지, CSS, JS와 같은 정적 파일을 저장할 오브젝트 스토리지 버킷을 생성합니다.
- **실습**: [Chapter2_Storage.md](Chapter2_Storage.md)의 가이드를 따라 버킷을 생성합니다. **CLI 대신 "IaC 맛보기" 섹션의 Terraform 코드를 사용하여 배포해보는 것을 권장합니다.**
- **검증**: 버킷이 생성되었는지 콘솔에서 확인하고, 샘플 이미지 파일을 업로드해봅니다.

---

## Step 3: 블로그 애플리케이션 서버 만들기 (VM)

- **목표**: 블로그 애플리케이션을 실행할 VM을 만들고, 방문자가 많아져도 버틸 수 있도록 로드밸런서와 오토스케일링으로 고가용성을 구성합니다.
- **실습**: [Chapter3_VM.md](Chapter3_VM.md)의 가이드를 따라 단일 VM 웹 서버를 먼저 생성하고, 이후 고가용성 아키텍처로 확장합니다.
- **장애 대응 실습**: 가이드에 따라 **헬스체크 실패 시나리오**를 직접 수행하여, 로드밸런서가 아픈 VM을 어떻게 처리하는지 눈으로 확인합니다.

---

## Step 4: 외부 방문자 길 열어주기 (Network)

- **목표**: 외부 방문객들이 내 블로그 서버에 안전하게 접속할 수 있도록 네트워크와 방화벽을 설정합니다.
- **실습**: [Chapter4_Network.md](Chapter4_Network.md)의 가이드를 따라 Public/Private 서브넷을 구성하고, 웹 트래픽만 허용하는 보안 그룹(방화벽) 규칙을 적용합니다.
- **장애 대응 실습**: 가이드에 따라 **방화벽 규칙 오류 시나리오**를 직접 수행하여, 접속 불가 상황을 해결하는 과정을 경험합니다.

---

## Step 5: 리소스 정리 및 비용 확인 (가장 중요!)

- **목표**: **요금 폭탄을 막기 위해, 지금까지 만들었던 모든 리소스를 깨끗하게 삭제합니다.**
- **삭제 순서**: 일반적으로 생성의 역순으로 진행합니다. (VM/ASG → LB → 스토리지 버킷 → IAM 사용자/그룹 → VPC 등)
    - **Azure**: 리소스 그룹을 삭제하면 하위 리소스가 모두 삭제됩니다.
    - **AWS**: `EC2`, `S3`, `IAM` 등 각 서비스 콘솔에서 생성한 리소스를 직접 삭제해야 합니다.
    - **GCP**: `Compute Engine`, `Cloud Storage` 등 각 서비스에서 리소스를 삭제하거나, 프로젝트 자체를 삭제할 수 있습니다.
- **Terraform 사용 시**: `terraform destroy` 명령어로 생성했던 리소스를 한 번에 삭제할 수 있습니다. (IaC의 또 다른 장점!)
- **비용 확인**: 리소스 삭제 후, 각 클라우드의 비용 관리 대시보드에서 지금까지 발생한 예상 비용이 얼마인지 확인하고, 우리가 설정한 예산($5) 내에 있는지 점검합니다.

---

## 종합 제출물

- **나만의 블로그 아키텍처 다이어그램**
- **실습 과정 스크린샷**: 예산 설정 화면, Terraform apply/destroy 결과, 장애 대응 및 해결 과정, 최종 비용 확인 대시보드 등
- **회고**: 이번 실습을 통해 배운 점, 어려웠던 점, 그리고 실제 업무에 어떻게 적용할 수 있을지에 대한 생각 정리 (3가지 이상)

