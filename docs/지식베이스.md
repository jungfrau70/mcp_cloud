# 지식베이스 시스템 요구사항 및 개선사항

## 📋 **목차**
1. [파일 탐색기 개선 요구사항](#1-파일-탐색기-개선-요구사항)
2. [폴더 트리 UI 개선](#2-폴더-트리-ui-개선)
3. [문서 생성 기능 개선](#3-문서-생성-기능-개선)
4. [백엔드 API 확장](#4-백엔드-api-확장)
5. [사용자 경험 개선](#5-사용자-경험-개선)
6. [문서 검색 기능 추가](#6-문서-검색-기능-추가)
7. [사용자 시나리오](#7-사용자-시나리오)
8. [기술적 고려사항](#8-기술적-고려사항)

---

## 1. 파일 탐색기 개선 요구사항

### 1.1 기본 화면 구성
- **전체 화면 파일 탐색기**: 애플리케이션 실행 시 터미널 전체가 `mcp_knowledge_base` 디렉토리의 파일/디렉토리 목록을 보여주는 탐색기로 표시
- **Drag & Drop 기능**: `mcp_knowledge_base` 디렉토리(서브디렉토리 포함) 내에서 파일/폴더 이동 지원

### 1.2 문서 확인/편집 기능
- **모달 창 편집**: 파일 선택 시 화면 중앙에서 파일 내용을 모달 창으로 표시
- **편집 모드**: 모달 창 내에서 내용 확인 및 편집 가능
- **저장/취소**: 저장 또는 취소 시 모달 창 닫힘 및 보기 화면으로 복귀

---

## 2. 폴더 트리 UI 개선

### 2.1 폴더 구조 표시
- **📁 계층적 폴더 구조**: 사이드바에 계층적 폴더 구조 표시
- **🎯 폴더 선택**: 클릭으로 폴더 선택 및 열기/닫기 토글
- **🔵 시각적 구분**: 선택된 폴더는 파란색 배경으로 강조
- **📊 파일 수 표시**: 각 폴더의 파일 개수 표시
- **📐 계층 들여쓰기**: 폴더 레벨에 따른 시각적 들여쓰기

### 2.2 폴더 생성 기능
- **➕ 새 폴더 생성 버튼**: 새 폴더 생성 버튼 추가
- **⌨️ 프롬프트 입력**: 사용자가 폴더명 직접 입력
- **🏗️ 계층 구조**: 선택된 폴더 하위에 새 폴더 생성
- **🔗 서버 연동**: 백엔드 API를 통한 실제 폴더 생성

---

## 3. 문서 생성 기능 개선

### 3.1 폴더 기반 문서 생성
- **🎯 폴더 선택 반영**: 선택된 폴더에 문서 자동 생성
- **📍 경로 표시**: 편집 모드에서 저장 위치 명시
- **🏷️ 자동 카테고리**: 선택된 폴더명을 기본 카테고리로 설정
- **💾 경로 저장**: 문서에 폴더 경로 정보 포함

### 3.2 편집 모드 개선
- **📁 저장 위치 표시**: "📁 저장 위치: 폴더경로" 표시
- **🔄 상태 표시**: 새 문서 작성/편집 모드 구분
- **📍 경로 정보**: 문서가 저장될 전체 경로 표시

### 3.3. 외부 자료 기반 문서 생성

- **설명**: AI Agent가 웹 검색, 기술 문서, 레퍼런스 사이트 등 외부 자료를 활용하여 지식 베이스 문서를 자동으로 생성하거나 초안을 작성하는 기능을 제공합니다.
- **기능**:
    - **참조 사이트 및 기술 문서 검색**: 사용자가 제공한 키워드 또는 질문을 기반으로 관련 웹사이트, 공식 문서, 블로그 등을 검색합니다.
    - **정보 추출 및 요약**: 검색된 자료에서 핵심 정보를 추출하고, 이를 요약하여 문서 초안을 생성합니다.
    - **문서 형식화**: 추출된 정보를 지식 베이스의 표준 문서 형식에 맞춰 구조화합니다.
    - **자동 업데이트 제안**: 외부 자료의 변경 사항을 감지하여 기존 문서의 업데이트를 제안하거나 자동으로 반영합니다.
- **활용 시나리오**:
    - 새로운 클라우드 서비스 기능에 대한 문서 자동 생성.
    - 특정 에러 코드에 대한 해결 방안을 외부 자료에서 찾아 문서화.
    - 최신 기술 트렌드에 대한 요약 문서 생성.

---

## 4. 백엔드 API 확장

### 4.1 폴더 생성 API
- **엔드포인트**: `POST /api/v1/knowledge/folders`
- **경로 검증**: 보안을 위한 경로 검증 및 정규화
- **디렉토리 생성**: `os.makedirs`로 실제 폴더 생성
- **응답**: 생성된 폴더 경로와 성공 메시지 반환

#### API 명세
```http
POST /api/v1/knowledge/folders
Content-Type: application/json

{
  "parentPath": "/mcp_knowledge_base/aws",
  "folderName": "new-folder",
  "description": "새 폴더 설명"
}
```

#### 응답 형식
```json
{
  "success": true,
  "folderPath": "/mcp_knowledge_base/aws/new-folder",
  "message": "폴더가 성공적으로 생성되었습니다",
  "createdAt": "2024-01-15T10:30:00Z"
}
```

### 4.2 문서 저장 로직 개선
- **폴더 경로 고려**: 선택된 폴더에 문서 저장
- **파일명 생성**: 제목을 기반으로 한 파일명 자동 생성
- **메타데이터**: 폴더 경로, 제목, 카테고리 정보 포함
- **파일 수 업데이트**: 폴더의 파일 개수 자동 업데이트

---

## 5. 사용자 경험 개선

### 5.1 직관적인 워크플로우
```
1. 📁 폴더 선택 → 2. 📝 새 문서 클릭 → 3. ✏️ 내용 작성 → 4. 💾 저장 → 5. 선택한 폴더에 문서 생성 ✅
```

### 5.2 시각적 피드백
- **🎯 선택 상태**: 선택된 폴더 강조 표시
- **📍 저장 위치**: 편집 모드에서 저장 경로 명확히 표시
- **✅ 상태 메시지**: 저장 완료 시 전체 경로 표시
- **📂 폴더 아이콘**: 열림/닫힘 상태에 따른 아이콘 변경

### 5.3 데이터 구조
- **폴더 정보**: `path`, `name`, `level`, `isOpen`, `fileCount`
- **문서 정보**: 기존 필드 + `folderPath`, `path`
- **편집기**: 기존 필드 + `folderPath`

---

## 6. 문서 검색 기능 추가

### 6.1 검색 UI 구성
- **🔍 중앙 검색바**: 화면 중앙에 문서 검색 기능 배치
- **📚 백터 저장소 연동**: 백터 저장소에 저장된 문서 검색
- **🔗 검색 결과 링크**: 연결된 링크를 선택하면 중앙 화면에 표시

### 6.2 검색 API
```http
GET /api/v1/knowledge/search?q={검색어}&limit={결과수}&category={카테고리}
```

### 6.3 검색 결과 표시
- **📄 문서 제목 및 요약**: 검색 결과의 문서 제목과 내용 요약
- **📍 저장 위치 표시**: 문서가 저장된 폴더 경로
- **🔗 클릭 시 중앙 화면 표시**: 검색 결과 클릭 시 중앙 화면에 문서 내용 표시
- **📊 관련도 점수**: 검색어와의 관련도 점수 표시

### 6.4 백터 저장소 연동
- **🔍 의미 기반 검색**: 벡터 임베딩을 통한 의미 기반 검색
- **📚 문서 인덱싱**: 새로운 문서 추가 시 자동 인덱싱
- **🔄 실시간 업데이트**: 문서 수정 시 검색 인덱스 자동 업데이트

---

## 7. 사용자 시나리오

### 7.1 문서 생성 워크플로우
1. **📁 폴더 선택**: 사이드바에서 원하는 폴더 클릭
2. **📝 새 문서**: "새 문서" 버튼 클릭
3. **✏️ 내용 작성**: 제목 및 내용 입력
4. **💾 저장**: 저장 버튼 클릭
5. **✅ 완료**: 선택한 폴더에 문서 생성 완료

### 7.2 폴더 생성 워크플로우
1. **📁 부모 폴더 선택**: 생성할 위치의 상위 폴더 선택
2. **➕ 새 폴더**: "새 폴더" 버튼 클릭
3. **⌨️ 폴더명 입력**: 새 폴더명 입력
4. **✅ 생성**: 생성 버튼 클릭
5. **📂 완료**: 새 폴더 생성 완료

### 7.3 문서 검색 워크플로우
1. **🔍 검색어 입력**: 중앙 검색바에 검색어 입력
2. **📚 결과 확인**: 검색 결과 목록 확인
3. **🔗 문서 선택**: 원하는 문서 클릭
4. **📄 내용 표시**: 중앙 화면에 문서 내용 표시

---

## 8. 기술적 고려사항

### 8.1 보안 고려사항
- **경로 검증**: 사용자 입력 경로의 보안 검증
- **권한 관리**: 폴더 및 문서 접근 권한 제어
- **입력 검증**: 파일명 및 폴더명의 유효성 검사

### 8.2 성능 고려사항
- **지연 로딩**: 대용량 폴더의 지연 로딩
- **캐싱**: 자주 접근하는 폴더 구조 캐싱
- **인덱싱**: 검색 성능을 위한 문서 인덱싱

### 8.3 확장성 고려사항
- **플러그인 아키텍처**: 새로운 기능 추가를 위한 플러그인 구조
- **API 버전 관리**: API 호환성을 위한 버전 관리
- **다국어 지원**: 다국어 인터페이스 지원

---

## 📚 **참고 자료**

- **GitHub 저장소**: [mcp_cloud v1.1](https://github.com/jungfrau70/mcp_cloud/tree/v1.1)
- **백터 저장소**: FAISS 기반 문서 인덱싱
- **API 문서**: Swagger/OpenAPI 스펙
- **사용자 가이드**: 시스템 사용법 및 모범 사례

---

## 🔄 **개발 로드맵**

### Phase 1: 기본 기능 구현 (2-3주)
- [ ] 폴더 트리 UI 구현
- [ ] 기본 CRUD API 구현
- [ ] 파일 탐색기 기본 기능

### Phase 2: 고급 기능 구현 (3-4주)
- [ ] 백터 검색 기능 구현
- [ ] 폴더 생성/관리 기능
- [ ] 사용자 인터페이스 개선

### Phase 3: 최적화 및 테스트 (2-3주)
- [ ] 성능 최적화
- [ ] 보안 강화
- [ ] 사용자 테스트 및 피드백 반영


참조 사이트:
  https://docs.aws.amazon.com/ko_kr/
  https://cloud.google.com/docs
  https://developer.hashicorp.com/terraform/docs
  https://docs.github.com/ko/actions
  https://docs.ansible.com/
  https://docs.docker.com/