# 지식베이스 기능 명세서

## 📋 개요

지식베이스는 내부 자료 검색과 외부 자료 기반 AI 문서 생성을 통합한 지식 관리 시스템입니다. 사용자는 기존 문서를 검색하고 편집할 수 있으며, AI를 활용하여 외부 자료를 기반으로 새로운 문서를 자동 생성할 수 있습니다.

## 🏗️ 시스템 아키텍처

### Frontend (Vue.js 3 + Nuxt.js)
- **KnowledgeBase.vue**: 메인 지식베이스 컴포넌트
- **AIDocumentGenerator.vue**: AI 문서 생성 모달 컴포넌트
- **Tailwind CSS**: UI 스타일링

### Backend (FastAPI)
- **외부 검색 서비스**: Google Web Search API 연동
- **콘텐츠 추출기**: BeautifulSoup 기반 웹 페이지 콘텐츠 추출
- **AI 문서 생성기**: Google Gemini API 기반 문서 생성
- **RAG 서비스**: 벡터 검색 및 관련 문서 추천

## 🎯 주요 기능

### 1. 내부자료 검색 (Internal Search)

#### 1.1 카테고리별 필터링
- **구현 상태**: ✅ 완료
- **기능**: 
  - 전체, AWS, GCP, Azure, Terraform, 모범 사례 카테고리
  - 각 카테고리별 문서 수 표시
  - 카테고리 선택 시 문서 필터링

#### 1.2 문서 검색
- **구현 상태**: 🔄 개발 중
- **기능**:
  - 실시간 검색 (2글자 이상 입력 시)
  - 제목 및 내용 기반 검색
  - 검색 결과 하이라이팅

#### 1.3 최근 문서
- **구현 상태**: ✅ 완료
- **기능**:
  - 최근 접근한 문서 목록 표시
  - 클릭 시 문서 내용 로드
  - 문서 메타데이터 표시

#### 1.4 문서 편집
- **구현 상태**: ✅ 완료
- **기능**:
  - 문서 내용 편집 모드
  - 변경사항 추적 (dirty state)
  - 저장/취소 기능
  - 실시간 저장 상태 표시

### 2. 외부자료 기반 문서생성 (External Document Generation)

#### 2.1 문서 주제 입력
- **구현 상태**: ✅ 완료
- **기능**:
  - 자연어로 문서 주제 입력
  - 예시 텍스트 제공
  - 필수 입력 필드 검증

#### 2.2 문서 타입 선택
- **구현 상태**: ✅ 완료
- **옵션**:
  - 기술 가이드 (guide)
  - 단계별 튜토리얼 (tutorial)
  - 참조 문서 (reference)
  - 비교 분석 (comparison)

#### 2.3 검색 소스 선택
- **구현 상태**: ✅ 완료
- **옵션**:
  - 웹 검색 (web)
  - 뉴스 검색 (news)
  - 문서 검색 (docs)
- **특징**: 다중 선택 가능

#### 2.4 고급 설정
- **구현 상태**: ✅ 완료
- **기능**:
  - 저장 경로 지정 (선택사항)
  - 최대 검색 결과 수 설정 (1-10개)
  - 기본값: 5개

#### 2.5 실시간 진행 상태
- **구현 상태**: ✅ 완료
- **기능**:
  - 단계별 진행 상태 표시
  - 진행률 바 (0-100%)
  - 현재 작업 단계 메시지
  - 로딩 스피너 애니메이션

#### 2.6 결과 처리
- **구현 상태**: ✅ 완료
- **기능**:
  - 성공/실패 메시지 표시
  - 생성된 문서 자동 로드
  - 내부자료 검색 탭으로 자동 이동
  - 문서 편집 모드 활성화

## 🔧 기술적 구현

### Frontend 구현

#### KnowledgeBase.vue 구조
```vue
<template>
  <!-- 헤더 및 서브 메뉴 -->
  <div class="knowledge-base">
    <!-- 탭 네비게이션 -->
    <nav class="flex space-x-8">
      <button @click="activeTab = 'internal'">내부자료 검색</button>
      <button @click="activeTab = 'external'">외부자료 기반 문서생성</button>
    </nav>
    
    <!-- 내부자료 검색 탭 -->
    <div v-if="activeTab === 'internal'">
      <!-- 사이드바: 카테고리, 최근 문서 -->
      <!-- 메인: 검색, 문서 표시/편집 -->
    </div>
    
    <!-- 외부자료 기반 문서생성 탭 -->
    <div v-if="activeTab === 'external'">
      <!-- 문서 생성 폼 -->
      <!-- 진행 상태 표시 -->
    </div>
  </div>
</template>
```

#### 상태 관리
```javascript
// 탭 상태
const activeTab = ref('internal')

// 내부자료 검색 관련
const searchQuery = ref('')
const selectedCategory = ref('all')
const selectedDoc = ref(null)
const editMode = ref(false)
const dirty = ref(false)

// 외부자료 기반 문서생성 관련
const externalQuery = ref('')
const externalDocType = ref('guide')
const externalSearchSources = ref(['web', 'news'])
const externalTargetPath = ref('')
const externalMaxResults = ref(5)
const externalGenerating = ref(false)
const externalProgress = ref(0)
```

### Backend API

#### 외부자료 기반 문서생성 API
```python
POST /api/v1/knowledge/generate-from-external-enhanced
{
  "query": "문서 주제",
  "doc_type": "guide|tutorial|reference|comparison",
  "search_sources": ["web", "news", "docs"],
  "target_path": "저장 경로 (선택사항)",
  "max_results": 5
}
```

#### 응답 형식
```python
{
  "success": true,
  "message": "문서 생성 완료 메시지",
  "generated_doc_data": {
    "title": "생성된 문서 제목",
    "category": "ai-generated",
    "content": "마크다운 형식 문서 내용"
  }
}
```

## 🎨 UI/UX 특징

### 1. 탭 기반 인터페이스
- **내부자료 검색**: 기존 문서 관리
- **외부자료 기반 문서생성**: AI 문서 생성
- **직관적인 네비게이션**: 활성 탭 하이라이팅

### 2. 반응형 디자인
- **데스크톱**: 3단 레이아웃 (사이드바 + 메인 + 상세)
- **태블릿/모바일**: 적응형 레이아웃
- **Tailwind CSS**: 일관된 디자인 시스템

### 3. 사용자 피드백
- **로딩 상태**: 스피너 및 진행률 바
- **성공/실패 메시지**: 색상 구분된 알림
- **실시간 검증**: 입력 필드 유효성 검사

## 📊 데이터 모델

### 카테고리
```javascript
{
  id: 'aws|gcp|azure|terraform|best-practices',
  name: '카테고리명',
  count: 25
}
```

### 문서
```javascript
{
  id: 1,
  title: '문서 제목',
  category: '카테고리',
  content: '마크다운 형식 내용',
  created_at: '2024-01-01T00:00:00Z',
  updated_at: '2024-01-01T00:00:00Z'
}
```

## 🔄 워크플로우

### 내부자료 검색 워크플로우
1. 사용자가 카테고리 선택 또는 검색어 입력
2. 시스템이 관련 문서 필터링
3. 사용자가 문서 선택
4. 문서 내용 표시 또는 편집 모드 활성화
5. 변경사항 저장

### 외부자료 기반 문서생성 워크플로우
1. 사용자가 문서 주제 입력
2. 문서 타입 및 검색 소스 선택
3. 고급 설정 구성 (선택사항)
4. AI 문서 생성 시작
5. 실시간 진행 상태 표시
6. 생성 완료 후 문서 자동 로드
7. 내부자료 검색 탭으로 이동하여 편집 가능

## 🚀 향후 개선 계획

### 단기 개선 (1-2개월)
- [ ] 실제 검색 API 구현
- [ ] 문서 저장/로드 API 연동
- [ ] 카테고리별 문서 필터링 구현
- [ ] 문서 버전 관리 기능

### 중기 개선 (3-6개월)
- [ ] 문서 태깅 시스템
- [ ] 고급 검색 필터 (날짜, 작성자 등)
- [ ] 문서 공유 및 협업 기능
- [ ] 문서 템플릿 시스템

### 장기 개선 (6개월 이상)
- [ ] AI 기반 문서 요약 및 키워드 추출
- [ ] 문서 간 연관성 분석
- [ ] 지식 그래프 시각화
- [ ] 다국어 지원

## 🐛 알려진 이슈

### 해결된 이슈
- ✅ HTML 태그 오류 수정
- ✅ Docker 컨테이너 권한 문제 해결
- ✅ PostgreSQL 연결 안정화

### 현재 이슈
- 🔄 검색 기능 미구현 (TODO 항목)
- 🔄 문서 저장 API 미연동 (TODO 항목)

## 📝 개발 가이드

### 새로운 기능 추가 시
1. **Frontend**: Vue 컴포넌트 생성 및 라우팅 설정
2. **Backend**: FastAPI 엔드포인트 구현
3. **테스트**: 단위 테스트 및 통합 테스트 작성
4. **문서화**: API 문서 및 사용자 가이드 업데이트

### 코드 스타일
- **Vue.js**: Composition API 사용
- **TypeScript**: 타입 정의 필수
- **CSS**: Tailwind CSS 클래스 사용
- **Python**: PEP 8 스타일 가이드 준수

---

**최종 업데이트**: 2024년 12월 19일
**버전**: 1.0.0
**담당자**: MCP Cloud 개발팀